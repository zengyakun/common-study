<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>模拟上传</title>
</head>
<body>
<script language="JavaScript" src="jquery-1.8.1.min.js"></script>
<script language="JavaScript" src="jquery.form.js"></script>
<style type="text/css">
    .tdtitle {
        background-color: #EFF3F5;
        width: 140px;
    }

    #table td {
        height: 55px;
        padding-left: 10px;
    }

    #table, #table td {
        border: solid 1px #E2E8EC;
        border-collapse: collapse
    }
</style>
<div>
    <form name="form1" id="fileform" action="#" method="post" enctype="multipart/form-data">
        <table style="width: 500px;" id="table">
            <tr>
                <td class="tdtitle">工单类型</td>
                <td>
                    <select name="thirdTypeId">
                        <option value="222701">挂表-居民户</option>
                        <option value="221901">点火-居民户</option>
                        <option value="223007">换表-到期换表</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td class="tdtitle">工单内容</td>
                <td>
                    <textarea name="content" cols="35" rows="2"></textarea>
                </td>
            </tr>
            <tr>
                <td class="tdtitle">上传附件</td>
                <td>
                    <input type="file" name="excel"
                           accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: right; padding-right: 20px;">
                    <button id="fileupload" onclick="submitForm();">提交</button>
                </td>
                <input type="hidden" name="inputCsrId" value="8001">
                <input type="hidden" name="inputDeptId" value="090425000008">
            </tr>
        </table>
    </form>
</div>
<img src="wait.gif" style="display:none" id="imgWait" />
<script language="JavaScript">
    function submitForm(){
        $("#imgWait").show();
        var options = {
            //todo 上线后修改为生产环境地址
            url:"http://192.168.0.49:11003/wm_cb/workOrderImp", //上传文件的路径
            // url:"http://127.0.0.1:8081/mvcdemo/workOrderImp",
            type:"post",
            crossDomain:true,
            dataType:"text/html",
            success: function(data){
                alert("success");
                alert(data);
                $("#imgWait").hide();
            },
            error: function () {
                alert("上传失败！");
                $("#imgWait").hide();
            }
        };
        $(form1).submit(function(){
            return false;
        });
        $(form1).ajaxSubmit(options);
    }
</script>
</body>
</html>